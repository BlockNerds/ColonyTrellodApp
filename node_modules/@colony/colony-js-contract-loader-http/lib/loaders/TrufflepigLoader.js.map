{"version":3,"sources":["../../src/loaders/TrufflepigLoader.js"],"names":["DEFAULT_HOST","DEFAULT_ENDPOINT","TrufflepigLoader","endpoint","transform","_endpoint","split","host","_host","index","fetch","response","json","accounts","addresses","Object","keys","Error","address","privateKey"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;AACA;;AAIA;;;;;;AAEA,IAAMA,eAAe,uBAArB;;AAEA,IAAMC,mBAAsBD,YAAtB,qEAAN,C,CAA4G;;IAEvFE,gB;;;AAGnB,8BAAmE;AAAA,mFAAJ,EAAI;AAAA,6BAArDC,QAAqD;AAAA,QAArDA,QAAqD,iCAA1CF,gBAA0C;;AAAA;;AAAA,kJAC3D,EAAEG,mDAAF,EAA+BD,kBAA/B,EAD2D;;AAAA,gCAElD,MAAKE,SAAL,CAAeC,KAAf,CAAqB,YAArB,CAFkD;AAAA;AAAA,QAE1DC,IAF0D;;AAGjE,UAAKC,KAAL,GAAaD,IAAb;AAHiE;AAIlE;;;;;4GAEgBE,K;;;;;;;uBACQC,MAAS,KAAKF,KAAd,e;;;AAAjBG,wB;;uBACiBA,SAASC,IAAT,E;;;AAAjBC,wB;AAEAC,yB,GAAYC,OAAOC,IAAP,CAAYH,QAAZ,C;;oBACbC,UAAUL,KAAV,C;;;;;sBACG,IAAIQ,KAAJ,wBAA+BR,KAA/B,gB;;;AAEFS,uB,GAAUJ,UAAUL,KAAV,C;AACVU,0B,GAAaN,SAASK,OAAT,C;iDACZ,EAAEA,gBAAF,EAAWC,sBAAX,E;;;;;;;;;;;;;;;;;;;;kBAnBUjB,gB","file":"TrufflepigLoader.js","sourcesContent":["/* @flow */\n\nimport 'isomorphic-fetch';\nimport { truffleTransform } from '@colony/colony-js-contract-loader';\n\nimport type { ConstructorArgs } from '../flowtypes';\n\nimport HttpLoader from './HttpLoader';\n\nconst DEFAULT_HOST = 'http://127.0.0.1:3030';\n\nconst DEFAULT_ENDPOINT = `${DEFAULT_HOST}/contracts?name=%%NAME%%&address=%%ADDRESS%%&version=%%VERSION%%`; // eslint-disable-line max-len\n\nexport default class TrufflepigLoader extends HttpLoader {\n  _host: string;\n\n  constructor({ endpoint = DEFAULT_ENDPOINT }: ConstructorArgs = {}) {\n    super({ transform: truffleTransform, endpoint });\n    const [host] = this._endpoint.split('/contracts');\n    this._host = host;\n  }\n\n  async getAccount(index: number) {\n    const response = await fetch(`${this._host}/accounts`);\n    const accounts = await response.json();\n\n    const addresses = Object.keys(accounts);\n    if (!addresses[index])\n      throw new Error(`Account for index ${index} not found`);\n\n    const address = addresses[index];\n    const privateKey = accounts[address];\n    return { address, privateKey };\n  }\n}\n"]}